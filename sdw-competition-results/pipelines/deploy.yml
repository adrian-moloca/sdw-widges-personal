trigger: none

pool:
  vmImage: ubuntu-latest

steps:
  - task: Docker@2
    displayName: 'Build and push image to ACR'
    inputs:
      Dockerfile: sdw-competition-results/dockerfile
      containerRegistry: AzureContainerRegistry
      repository: sdw-widget-dev

  - task: AzureWebAppContainer@1
    displayName: 'Deploy to Web App for Containers'
    inputs:
      azureSubscription: OCS-SED-DEV
      resourceGroupName: BD-SDW_WIDGET-RG01
      appName: BD-SDW-WIDGET-APP01
      containers: bxauthmanageracr1.azurecr.io/sdw-widget-dev:$(Build.BuildId)
      appSettings: '-WEBSITES_PORT 5173'
